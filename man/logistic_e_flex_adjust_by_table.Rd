% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/bpe.R
\name{logistic_e_flex_adjust_by_table}
\alias{logistic_e_flex_adjust_by_table}
\title{Flexible Logistic Regression with Adjustments by Table}
\usage{
logistic_e_flex_adjust_by_table(
  tab_obj,
  pvar,
  evar,
  adjustment_variables,
  logxform_e = T,
  scale_e = T,
  quantile_expo = NULL,
  exposure_levels = NULL
)
}
\arguments{
\item{tab_obj}{A table object containing a merged data frame (\code{merged_tab}) with phenotype, exposure, weights, and adjustment variables.}

\item{pvar}{Character; the name of the phenotype variable.}

\item{evar}{Character; the name of the exposure variable.}

\item{adjustment_variables}{A tibble indexed by \code{scenario} and \code{variables}, specifying adjustment scenarios and associated adjustment variables.}

\item{logxform_e}{Logical; if \code{TRUE}, the exposure variable is log10-transformed. Default is \code{TRUE}.}

\item{scale_e}{Logical; if \code{TRUE}, the exposure variable is scaled (z-score transformation). Default is \code{TRUE}.}

\item{quantile_expo}{Optional numeric vector specifying quantiles for discretizing the exposure variable (e.g., \code{c(0, 0.25, 0.5, 0.75, 1)}). Default is \code{NULL}.}

\item{exposure_levels}{Optional character vector specifying levels to treat the exposure variable as categorical. Default is \code{NULL}.}
}
\value{
A list containing:
\item{log_e}{Logical; whether the exposure variable was log-transformed.}
\item{scaled_e}{Logical; whether the exposure variable was scaled.}
\item{unweighted_n}{Integer; the number of unweighted observations used in the analysis.}
\item{phenotype}{Character; the name of the phenotype variable.}
\item{series}{Character vector; the series of datasets considered in the analysis.}
\item{exposure}{Character; the name of the exposure variable.}
\item{models}{List; the logistic regression models for each adjustment scenario.}
\item{base_models}{List; the baseline models (excluding the exposure variable) for each adjustment scenario.}
\item{demographic_breakdown}{Data frame; demographic summaries of the survey design.}
}
\description{
This function performs logistic regression on a phenotype and exposure variable within a table object, applying flexible adjustments for multiple scenarios and transformations of the exposure variable.
}
\details{
The function takes a \code{tab_obj} containing a merged table, transforms the phenotype and exposure variables,
and fits logistic regression models for multiple adjustment scenarios. It supports:
\itemize{
\item Log-transformation or scaling of the exposure variable.
\item Creation of survey designs using the \strong{survey} package.
\item Flexible adjustment based on scenarios provided in \code{adjustment_variables}.
\item Demographic breakdowns of the survey design.
}

The function uses utility functions like \code{name_and_xform_logistic_pheno_expo}, \code{create_svydesign},
and \code{run_logistic_model} to perform preprocessing and modeling.
}
\examples{
\dontrun{
# Example adjustment variables tibble
adjustment_vars <- tibble::tibble(
  scenario = c("baseline", "adjusted"),
  variables = list(NULL, c("age", "gender"))
)


# Run logistic regression with flexible adjustments
result <- logistic_e_flex_adjust_by_table(
  tab_obj = table_object,
  pvar = "pheno",
  evar = "expo",
  adjustment_variables = adjustment_vars,
  logxform_e = TRUE,
  scale_e = TRUE
)

# Access models and demographic breakdown
result$models
result$demographic_breakdown
}

}
